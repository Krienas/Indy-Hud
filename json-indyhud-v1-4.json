{"slots":{"0":{"name":"core","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-3":{"name":"player","type":{"events":[],"methods":[]}},"-2":{"name":"construct","type":{"events":[],"methods":[]}},"-4":{"name":"system","type":{"events":[],"methods":[]}},"-5":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"language = 'EN' --export: EN, DE, FR\nstartingModeNumber = 0 --export: Codes 1 to 9, or 0 for \"Show All\".\nshowContainers = true --export: Show containers in AR view and filters.\nshowRecipes = true --export: Show recipe list in the detail view box.\nmaxRenderDist = 70 --export: Default render distance in meters. Can affects FPS.\nmaxPerFrame = 350 --export: Units drawn and checked per render frame. Lower this if you are running other scripts too or getting shutdowns.\nfontSize = 0.94 --export: Recommended = 0.94, large = 1.2\nminimumOpacity = 0.45 --export: Lowest opacity of distant units. Range of zero to 1.\ndebugMode = false --export: Show debug data.\n\nlocal a=maxRenderDist;local b=70;local c=false;local d=false;local e=10;local f=false;fpsEpoch=system.getArkTime()fpsTimer=0;renderFrames=0;fpsRender=0;fps=30;renderLoopPause=0;local g,h,i,j,k,l=system.print,string.format,math.floor,math.max,math.min,table.concat;local m=16777216;local function n(o)local p=o.x*Industry.cx;local q=o.y*Industry.cy;local r=o.z*Industry.cz;return p+q+r+Industry.worldPos end;local function s(t)return t==math.huge or t==-math.huge end;function round(u,v)local w=10^(v or 0)return i(u*w+0.5)/w end;local function x(y)if y==nil or y~=y or y<1 or type(y)~=\"number\"then return\"00:00:00\"end;local z=i(y/3600)y=y-3600*z;local k=i(y/60)y=y-60*k;local A=round(y,0)local B=h(\"%02d:%02d:%02d\",z,k,A)return B end;local function C(D,E)return D.dist<E.dist end;local F={EN=0,DE=1,FR=2}local G=F[language]local H={['Exit HUD']={'HUD Beenden','Arréter HUD'},['Container']={'Behälter','Conteneur'},['Stopped']={'Angehalten','Arrété'},['Running']={'Laufend','En fonctionnement'},['Needs Ingredients']={'Fehlende Eingabekomponenten','Ingrédients manquants'},['Output Full']={'Fehlende Ausgabelagerkapazität','Sortie pleine'},['No Output Link']={'Fehlende Ausgabebehälter','Lien de sortie manquant'},['Pending']={'Anstehend','En attente'},['Missing Schematics']={'Keine Schemas mehr übrig','Schémas manquants'},['Server Error']={'Serverfehler','Erreur serveur'},['All Error Codes']={'Alle Fehlercodes',\"Tout les codes d'erreurs\"},['Reset All Filters']={'Alle Filter zurücksetzen','Réinitialiser tous les filtres'},['Search For Output Products']={'Suche nach Ausgabeprodukten','Rechercher des produits de sortie'},['Search By Machine Type']={'Nach Maschinentyp suchen','Recherche par type de machine'},['Include Containers']={'Beinhaltet Behälter','Inclure les conteneurs'},['Show Recipes']={'Rezepte anzeigen','Afficher les recettes'},['Reload the HUD']={'HUD erneut laden','Rechargez le HUD'},['LOADING DATA']={'LADE DATEN','CHARGEMENT DES DONNÉES'},['TOTAL ELEMENTS']={'GESAMTE ELEMENTE','TOTAL DES ÉLÉMENTS'},['RENDERED']={'GERENDERT','RENDU'},['MATCHES IN RANGE']={'TREFFER IM BEREICH','CORRESPONDANCES'},['off']={'aus','éteint'},['on']={'ein','allumé'},['full']={'voll','complet'},['Search filters will stack until reset with R']={'Die Suchfilter werden gestapelt, bis sie mit R zurückgesetzt werden'}}local function I(J)if G>0 and H[J]then return H[J][G]else return J end end;Industry=(function()local K={i=0,cx=vec3(construct.getWorldOrientationRight()),cy=vec3(construct.getWorldOrientationForward()),cz=vec3(construct.getWorldOrientationUp()),pPos=vec3(player.getWorldPosition()),loaded=false,ready=false,states={I('Stopped'),I('Running'),I('Needs Ingredients'),I('Output Full'),I('No Output Link'),I('Pending'),I('Missing Schematics'),I('Server Error')},allBlocks={},renderBlocks={},elemIndy={},renderIndy={},priorityIndy={},totalUnits=0,totalUnrender=0,matchesFound=0,renderSize=0,renderCt=0,lastFilter='r',searchActive=false,searches={},filters={1,1,1,1,1,1,1,1},cssStatic=[[\n      <style>\n      .parent-p{position:absolute;top:0;left:0;z-index:400;}\n      .parent-r{position:absolute;top:0;left:0;z-index:100;}\n      .indy{\n        position: absolute;\n        display: block;\n        color: #222;\n        font-size: ]]..fontSize..[[vh;\n        opacity: 0.7;\n        max-width: ]]..20*fontSize..[[vh;\n        text-transform:uppercase;\n        transform-origin: 0 0;\n      }\n      .ifull{\n        width: ]]..20*fontSize..[[vh;\n      }\n      .fs-s{font-size:0.92em;}\n      .bg-b .ii{background:#303030; color:#fff;}\n      .bg-k .ii{background:#666; color:#f1f1f1;}\n      .grow{flex-grow:1;}\n      .ii-row{display: flex;}\n      .ii{display:inline-block; padding: 0.2rem 0.3rem; margin:0.08rem; margin-left:0; background:#eee;}\n      .ib{border:1px solid #eee; color:#fff; text-transform:lowercase;}\n      .ic{text-transform:lowercase;}\n      .ii-dist, .ii-indy{display:inline-block; transform: skew(-15deg); font-weight:900;}\n      .ii-st{color:#fff;}\n      .st-red{background:#892e2e;}\n      .st-green{background:#338f47;}\n      .st-yellow{background:#958122;}\n      .st-steel{background:#566e7e;}\n      .st-orange{background:#d55800;}\n      .ii-tier{color:#fff;}\n      .ii-tier{color:#fff;}\n      .ii.tier-X{background:#666;}\n      .ii.tier-1{background:#5494f7;}\n      .ii.tier-2{background:#2977ef;}\n      .ii.tier-3{background:#06f;}\n      .ii.tier-4{background:#0152cd;}\n      .ii.tier-5{background:#003991;}\n      .ii-name{white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}\n      .ii-rb{background:#cacaca; color:#333;}\n      div.sks{padding:0.4em 0.5em; margin-top:0.5em; background:#3473BA; color:#fff; font-size:1.1em;}\n      .legend{position:absolute; left:2vw; top:]]..27-80*(fontSize-0.91)..[[vh; background:#fff; opacity:0.85; font-size:]]..fontSize..[[vh; color:#222; z-index:999;}\n      .legend h2{font-size:]]..fontSize..[[vh; margin:0 0 0.2em 0; padding:0.15em 0.6em; background:#3473BA; color:#fff; font-weight:400;}\n      .legend > p{color:#666; font-size:0.95em; line-height:1.0; padding:0em 0.3em; margin:0.4em 0.6em 0 0.6em; border-left:0.5em solid #3473BA;}\n      ul{list-style:none; margin:0; padding:0.6em 0 0.2em 0;}\n      ul li{margin-bottom:0.3em; padding:0.2em 0.6em;}\n      li strong{background:#555; color:#f1f1f1; padding:0.2em 0.3em; margin-right:0.4em;}\n      li span{background:#e1e1e1; color:#555; padding:0.2em 0.3em; margin-right:0.4em;}\n      li span.on{background:#338f47; color:#fff;}\n      li span.off{background:#777; color:#ccc;}\n      .glow::after{z-index:10; display:block; position:absolute; top:-0.6vh; left:-0.6vh; width:1vh; height:1vh; border:0.4vh solid #fff; border-right:none; border-bottom:none; content:' ';}\n      .svg{display:inline-block;}\n      svg{width:100%;}\n      svg,.svg{margin:0; padding:0;}\n    ]],cssBase=\"\"}local L={}function K.getCSS(M)M.cssBase=M.cssStatic..[[\n      li.]]..M.lastFilter..[[{background:#3473BA !important; color:#fff;}\n      ]]..(M.searchActive and\"li.f1{background:#3473BA !important; color:#fff;}\"or\"\")..[[\n      </style>\n      <div class=\"legend\">\n        <div class=\"svg\"><svg version=\"1.1\" viewBox=\"0 0 1024 84\" xml:space=\"preserve\">\n          <style type=\"text/css\">\n            .st0{fill:#3473BA;}\n            .st1{fill:#FFFFFF;}\n            .st2{font-family:'BankGothic';}\n            .st3{font-size:46.69px; text-transform:uppercase;}\n          </style>\n          <rect class=\"st0\" width=\"100%\" height=\"90\"/>\n          <g>\n            <path class=\"st1\" d=\"M41.2,37.2c2.9-0.2,5.8,1,7.5,3.4c1.3,1.7,3.7,2.1,5.4,0.8c0,0,0.1,0,0.1-0.1l2.9-2.3c1.7-1.3,2-3.7,0.7-5.3\n              c-6.6-8.7-19.1-10.5-27.8-3.8s-10.5,19.1-3.8,27.8c3.7,4.9,9.6,7.9,15.8,7.9c4.3-0.1,8.5-1.5,12.1-4.1c5.1-3.5,10.2-9,19.9-16\n              c-4.2,1.1-8.4,2.4-12.5,4c-6.6,2.3-13.9,4.8-19.5,4.7c-4.7,0-8.5-3.8-8.5-8.5C33.5,41.2,36.9,37.5,41.2,37.2L41.2,37.2z\"/>\n            <path class=\"st1\" d=\"M87,54.1c-2.9,0.2-5.8-1-7.5-3.4c-1.3-1.7-3.7-2.1-5.4-0.8c0,0-0.1,0-0.1,0.1l-2.9,2.3c-1.7,1.3-2,3.7-0.7,5.3\n              c6.6,8.8,19.1,10.5,27.8,3.9s10.5-19.1,3.9-27.8c-3.8-5-9.6-7.9-15.9-7.9c-4.3,0.1-8.5,1.5-12.1,4.1c-5.1,3.5-10.2,9-19.9,16\n              c4.2-1.1,8.4-2.4,12.5-4c6.6-2.3,13.9-4.8,19.5-4.7c4.7,0.2,8.3,4.2,8.1,8.8C94.2,50.2,91.1,53.6,87,54.1z\"/>\n          </g>\n          <text transform=\"matrix(1 0 0 1 126.19 57.85)\" class=\"st1 st2 st3\">Infinity Corporation</text>\n        </svg></div>\n        ]]if M.ready then M.cssBase=M.cssBase..[[\n          <h2>INDY HUD v1.4</h2>\n          <p>]]..I('TOTAL ELEMENTS')..[[: ]]..M.totalUnits..[[</p>\n          <p>]]..I('RENDERED')..[[: ]]..M.renderCt..[[ (]]..fps..[[ fps)</p>\n          <p>]]..I('MATCHES IN RANGE')..[[: ]]..M.matchesFound..[[</p>\n          <p>RENDER DISTANCE: ]]..a..[[m</p>\n          <ul>\n            <li><strong>CTRL:BACKSPC</strong><span>]]..I('Exit HUD')..[[</span></li>\n            <li class=\"a1\"><strong>A:1</strong><span>show 1</span>]]..M.states[1]..[[</li>\n            <li class=\"a2\"><strong>A:2</strong><span>show 2</span>]]..M.states[2]..[[</li>\n            <li class=\"a3\"><strong>A:3</strong><span>show 3</span>]]..M.states[3]..[[</li>\n            <li class=\"a4\"><strong>A:4</strong><span>show 4</span>]]..M.states[4]..[[</li>\n            <li class=\"a5\"><strong>A:5</strong><span>show 5</span>]]..M.states[5]..[[</li>\n            <li class=\"a6\"><strong>A:6</strong><span>show 6</span>]]..M.states[6]..[[</li>\n            <li class=\"a7\"><strong>A:7</strong><span>show 7</span>]]..M.states[7]..[[</li>\n            <li class=\"a8\"><strong>A:8</strong><span>show 8</span>]]..M.states[8]..[[</li>\n            <li class=\"a9\"><strong>A:9</strong><span>show errors</span>]]..I('All Error Codes')..[[</li>\n            <li class=\"r\"><strong>R</strong><span>show all</span>]]..I('Reset All Filters')..[[</li>\n            <li class=\"f1\"><span>find pure</span>]]..I('Search For Output Products')..[[</li>\n            <li class=\"f1\"><span>find assembly</span>]]..I('Search By Machine Type')..[[</li>\n          </ul>\n          <div class=\"sks\">]]..l(M.searches,', ')..[[</div>\n          <h2>OPTIONS</h2>\n          <ul>\n            <li><strong>S:G</strong><span class=\"]]..(showContainers and\"on\"or\"off\")..[[\">]]..I(showContainers and(f and\"full\"or\"on\")or\"off\")..[[</span>]]..I('Include Containers')..[[</li>\n            <li><strong>S:L</strong><span class=\"]]..(showRecipes and\"on\"or\"off\")..[[\">]]..I(showRecipes and\"on\"or\"off\")..[[</span>]]..I('Show Recipes')..[[</li>\n            <li><strong>S:R</strong>]]..I('Reload the HUD')..[[</li>\n          </ul>\n        ]]else M.cssBase=M.cssBase..[[\n          <h2>]]..I('LOADING DATA')..[[</h2>\n          <p>...</p>\n          <div class=\"sks\"></div>\n        ]]end;M.cssBase=M.cssBase..\"</div>\"end;function K.getARxy(M,N)local y={N.pos.x,N.pos.y,N.pos.z}return library.getPointOnScreen(y)end;function K.sortItems(M)table.sort(M.sortedIndy)end;function K.filter(M,y)if y=='errors'then M.lastFilter='a9'for O,P in ipairs(M.filters)do M.filters[O]=0 end;M.filters[3]=1;M.filters[4]=1;M.filters[5]=1;M.filters[7]=1;M.filters[8]=1 elseif y=='all'then M.lastFilter='r'M.searchActive=false;M.searches={}for O,P in ipairs(M.filters)do M.filters[O]=1 end elseif type(y/1)=='number'then M.lastFilter='a'..y;for O,P in ipairs(M.filters)do M.filters[O]=0 end;M.filters[y/1]=1 end end;function K.find(M,y)M.searchActive=true;local Q=y:lower()M.searches[#M.searches+1]=Q end;function K.init(M)M.curTime=system.getArkTime()system.showScreen(1)system.setScreen(\"\")M.ready=false;M.loaded=false;M.schemBox=nil;M.schemsList={}M.worldPos=vec3(construct.getWorldPosition())if startingModeNumber>0 then if startingModeNumber==9 then Industry:filter('errors')else Industry:filter(startingModeNumber)end end;M.Initializer=coroutine.create(M.initRun)M.Renderer=coroutine.create(M.render)M.Processor=coroutine.create(M.update)M.Organizer=coroutine.create(M.organize)M.Schemer=coroutine.create(M.schemsCFN)end;function K.coInit(M)local R=coroutine.status(M.Initializer)if R~=\"dead\"then local S,T=coroutine.resume(M.Initializer)if T then g(\"ERROR: coinit\")end end end;function K.initRun()local M=Industry;local U=core.getElementIdList()local V={}local W=construct.getSchematicContainerId()for X,Y in pairs(unit)do if type(Y)==\"table\"and type(Y.export)==\"table\"and Y.getClass then if Y.getLocalId()==W then M.schemBox=Y end end end;for O=1,#U,1 do local Z={uid=U[O],class=core.getElementClassById(U[O]),state=0,schemLeft=0,unitsDone=0,batchTotal=0,batchLeft=0,maintainTotal=0,maintainDone=0,products={}}local _=Z.class:lower():sub(1,8)if _=='industry'or _=='containe'then Z.name=core.getElementNameById(U[O])Z.class=_;Z.kind=core.getElementDisplayNameById(U[O])if Z.class=='industry'then Z.pos=vec3(core.getElementPositionById(U[O]))+vec3(core.getElementUpById(U[O]))else Z.pos=vec3(core.getElementPositionById(U[O]))+vec3(core.getElementUpById(U[O]))/2;Z.productName=Z.name end;Z.pos=vec3(n(Z.pos))Z.body=\"\"Z.bodyTiny=\"\"Z.dist=200;Z.msgColor='orange'V['uid'..Z.uid]=Z else end;if math.fmod(O,maxPerFrame)==0 then coroutine.yield()end end;M.elemIndy=V;M.renderIndy={}M.loaded=true;if W==nil then system.print(\"Schematic container not set up for the construct.\")end;if M.schemBox==nil then system.print(\"No schematic container linked to this board.\")end end;function K.makeContainer(M,N)N.bodyTiny=[[<div class=\"ii ic\">]]..N.dist..[[m</div>]]N.body=[[\n      <div class=\"ii-row fs-s bg-b\">\n        <div class=\"ii ii-dist\">]]..N.dist..[[m</div><div class=\"ii ii-indy\">]]..I('Container')..[[</div>\n      </div>\n      <div class=\"ii-row\">\n        <div class=\"ii\">]]..N.name..[[</div>\n      </div>\n    ]]N.bodyTiny=N.body end;function K.makeBody(M,N)local a0='red'if N.state==2 then a0='green'elseif N.state==3 or N.state==7 then a0='orange'elseif N.state==1 then a0='steel'elseif N.state==6 then a0='yellow'end;N.msgColor=a0;local a1='X'local a2='-'local a3=\"No selection\"local a4=N.schemLeft and\"SCHEMS: \"..N.schemLeft..\"/\"..N.schemCost or\"-\"local a5=false;if N.mainProduct and N.mainProduct.name then a1=N.mainProduct.tier;a2=N.mainProduct.scale;if a2==''or not a2 then a2='-'end;a3=N.mainProduct.name;a5=N.mainProduct.prid end;N.productName=a3;local a6=\"NA\"N.ordertype='na'if N.batchTotal>0 then if N.batchLeft~='--'then N.batchLeft=h(\"%.0f\",N.batchLeft)end;a6=\"BATCHES: \"..N.batchLeft..\" / \"..h(\"%.0f\",N.batchTotal)N.ordertype='batch'elseif N.maintainTotal>0 then a6=\"MAINTAIN: \"..h(\"%.0f\",N.maintainDone)..\" / \"..h(\"%.0f\",N.maintainTotal)N.ordertype='maintain'elseif N.state~=1 then a6=\"RUN &infin;\"N.ordertype='run'end;N.bodyTiny=[[<div class=\"ii ib st-]]..a0 ..[[\">]]..N.dist..[[m</div>]]N.body=[[\n      <div class=\"ii-row fs-s bg-b\">\n        <div class=\"ii ii-dist\">]]..N.dist..[[m</div><div class=\"ii ii-indy\">]]..N.name..[[</div>\n      </div>\n      <div class=\"ii-row\">\n        <div class=\"ii ii-st st-]]..a0 ..[[ grow\">]]..M.states[N.state]..[[</div>\n      </div>\n      <div class=\"ii-row bg-g\">\n        <div class=\"ii ii-tier tier-]]..a1 ..[[\">T]]..a1 ..[[</div><div class=\"ii scale-l\">]]..a2 ..[[</div><div class=\"ii ii-name grow\">]]..a3 ..[[</div>\n      </div>\n      <div class=\"ii-row fs-s\">\n        <div class=\"ii grow\">]]..a6 ..[[</div><div class=\"ii\">]]..a4 ..[[</div>\n      </div>\n    ]]if showRecipes and a5 and N.kind:lower():find('transfer unit')==nil then N.body=N.body..[[\n        <div class=\"ii-row fs-s\">\n          <div class=\"ii ii-rb grow\">]]..l(L[a5],\", \")..[[</div>\n        </div>\n      ]]end end;function K.makeRender(M,N)local a7=M:getARxy(N)local a8=a7[2]*100;local a9=a7[1]*100;if a9>94 or a9<1 or(a8>96 or a8<1)then return\"\"end;N.dist=i(a7[3])local aa=N.dist;local ab=1;ab=100-aa*10;local ac=\"\"ac=(100-aa/1.5-5)/100;local ad=75;ad=ad+40*(a-aa)/a;ad=ad/100;local ae=''local a3=N.productName;if N.class=='containe'then ae='bg-k'end;local af=false;if a8>49 and a8<50.25 and a9>48.5 and a9<49.5 then ac=0.99;ab=300-aa*10;af=true end;local ag=N.ordertype=='run'and' glow'or''local ah=\"\"if aa<=8 or aa<=a and af==true or N.class=='containe'and f==true then ab=200-aa*10;ah=[[\n        <div class=\"indy ifull ]]..ae..ag..[[\" style=\"z-index:]]..i(ab)..[[; opacity:]]..ac..[[; top: ]]..a8 ..[[vh; left: ]]..a9 ..[[vw;\">\n      ]]..N.body else ac=j(ac,minimumOpacity)if N.class=='containe'then ac=j(ac-0.2,minimumOpacity)end;ah=[[\n        <div class=\"indy ]]..ae..ag..[[\" style=\"z-index:]]..i(ab)..[[; opacity:]]..ac..[[; top: ]]..a8 ..[[vh; left: ]]..a9 ..[[vw; transform:scale(]]..ad..[[);\">\n          <div class=\"ii ib st-]]..N.msgColor..[[\">]]..N.dist..[[m</div>\n      ]]end;ah=ah..\"</div>\"if af==true then M.priorityIndy[#M.priorityIndy+1]=ah;return''else return ah end end;function K.coRender(M)if not M.loaded then return end;M:render()end;function K.render()local M=Industry;local O=1;if renderLoopPause<1 then M.pPos=vec3(player.getWorldPosition())M:getCSS()M.priorityIndy={'<div class=\"prnt-p\">'}M.renderBlocks={}M.renderBlocks[1]=M.cssBase;M.renderBlocks[2]='<div class=\"prnt-r\">'else O=renderLoopPause end;renderLoopPause=0;if M.ready then for ai=O,#M.renderIndy,1 do local aj=M:makeRender(M.elemIndy[M.renderIndy[ai]])O=O+1;if aj~=\"\"then M.renderBlocks[#M.renderBlocks+1]=aj end;if math.fmod(O-renderLoopPause,maxPerFrame*2.5)==0 then renderLoopPause=O;break end end end;if renderLoopPause>0 then return end;M.renderBlocks[#M.renderBlocks+1]=\"</div>\"M.priorityIndy[#M.priorityIndy+1]=\"</div>\"local ak=#M.renderBlocks or 3;M.renderCt=ak-3;renderFrames=renderFrames+1;local ah=table.concat(M.renderBlocks)..table.concat(M.priorityIndy)system.setScreen(ah)end;function K.coOrganize(M)if not M.loaded or not M.ready then return end;local R=coroutine.status(M.Organizer)if R~=\"dead\"then local S,T=coroutine.resume(M.Organizer)if T then g(\"ERROR: coOrganize\")end elseif R==\"dead\"then M.Organizer=coroutine.create(M.organize)local S,T=coroutine.resume(M.Organizer)end end;function K.organize()local M=Industry;local al=i(maxPerFrame/2)local am=0;local an=0;local ao={}local O=0;if M.ready then for ap,N in pairs(M.elemIndy)do O=O+1;local aq=true;local aa=M.pPos:dist(vec3(N.pos))if aa>a then aq=false elseif N.class=='containe'then if not showContainers then aq=false else local ar=true;local a3=N.productName:lower()if M.searchActive then for O,Q in ipairs(M.searches)do if a3==\"no selection\"or a3:find(Q)==nil and N.kind:lower():find(Q)==nil then ar=false end end end;if not ar then aq=false end end elseif M.filters[N.state]==0 then aq=false else local ar=true;local a3=N.productName:lower()if M.searchActive then for O,Q in ipairs(M.searches)do if a3==\"no selection\"or a3:find(Q)==nil and N.kind:lower():find(Q)==nil then ar=false end end end;if not ar then aq=false end end;if aq==true then if N.class~='containe'then am=am+1 else an=an+1 end;ao[#ao+1]=ap end;if math.fmod(O,al)==0 then coroutine.yield()end end end;lastRenderIndyCt=#ao;M.renderIndy=ao;M.matchesFound=am+an;local as=maxPerFrame*1.5;local at=math.abs(as-M.matchesFound)local au=200;if at>800 then au=50 end;local av=round(at/au)if M.matchesFound>as then if av<2 then return end;a=j(a-j(3,av),40)else a=k(a+j(10,av),150)end end;function K.coSchems(M)if not M.loaded or M.schemBox==nil then return end;local R=coroutine.status(M.Schemer)if R~=\"dead\"then local S,T=coroutine.resume(M.Schemer)if T then g(\"ERROR: coSchem\")end elseif R==\"dead\"then M.schemBox.updateContent()M.Schemer=coroutine.create(M.schemsCFN)local S,T=coroutine.resume(M.Schemer)end end;function K.schemsCFN()local M=Industry;if M.schemBox==nil then return end;local aw={}local ax=M.schemBox.getContent()for ai,ay in pairs(ax)do coroutine.yield()aw[\"k\"..ay.id]=ay.quantity end;M.schemsList=aw end;function K.schemsUpdate()system.print('container update')end;function K.coUpdate(M)if not M.loaded then return end;local R=coroutine.status(M.Processor)if R~=\"dead\"then local S,T=coroutine.resume(M.Processor)if T then g(\"ERROR: coUpdate\")end elseif R==\"dead\"then M.Processor=coroutine.create(M.update)local S,T=coroutine.resume(M.Processor)end end;function K.update()local M=Industry;local az=0;for ap,N in pairs(M.elemIndy)do local aA=core.getElementIndustryInfoById(N.uid)if not aA or N.class=='containe'then M:makeContainer(N)else N.name=core.getElementNameById(N.uid)local aB=aA.requiredSchematicIds[1]or 0;N.state=aA.state;N.schemLeft=h(\"%.0f\",M.schemsList[\"k\"..aB]or 0)N.schemCost=aA.requiredSchematicAmount;N.schemIds=aA.requiredSchematicIds;N.unitsDone=aA.unitsProduced;N.batchTotal=aA.batchesRequested;N.batchLeft=aA.batchesRemaining;N.maintainTotal=aA.maintainProductAmount;N.maintainDone=aA.currentProductAmount;if N.state==6 and N.maintainDone<N.maintainTotal then N.maintainDone=N.maintainTotal end;N.products=aA.currentProducts;N.timeLeft=aA.remainingTime;N.mainProduct={}if N.state==1 and N.batchLeft<0 then N.batchLeft='--'end;if N.maintainDone>=m then N.maintainDone=i(N.maintainDone/m)end;if N.products and#N.products>0 then N.mainProduct=N.products[1]local aC=N.mainProduct.id;local aD=system.getItem(aC)N.mainProduct.name=aD.locDisplayName;N.mainProduct.tier=aD.tier;N.mainProduct.scale=aD.size;local aE='p'..aC;N.mainProduct.prid=aE;if not L[aE]then local aF=system.getRecipes(aC)local aG={}if#aF>0 then for aH,aI in pairs(aF[1].ingredients)do local aJ=system.getItem(aI.id)aG[#aG+1]=aJ.locDisplayName..' '..aJ.size end end;L[aE]=aG end end;M:makeBody(N)end;az=az+1;if math.fmod(az,e)==0 then coroutine.yield()end end;M.totalUnits=az;M.ready=true end;return K end)()Commands=(function()local K={active=false,label='Listen to Voice',timed=0,lastCMD='',list={show={fn=function(M,aK)local y=aK[2]Industry:filter(y)end},find={desc=' [search key, find machines or outputs]',fn=function(M,aK)local aL=table.remove(aK,1)local P=table.concat(aK,' ')Industry:find(P)end}}}function K.init(M)M.helps={}for aK,aM in pairs(M.list)do if aM.desc then aM.name=aK;M.helps[#M.helps+1]=aK end end;table.sort(M.helps)end;function K.key(M,aN)local ap=aN:sub(7,8)local type=aN:sub(1,6)if ap=='9'then M:call('show errors')elseif aN=='speedup'then if c then Industry:init()else a=maxRenderDist;M:call('show all')end elseif aN=='lshift'then c=true elseif aN=='lalt'then d=true elseif aN=='gear'then if c then if f==true then f=false;showContainers=false elseif showContainers==false then showContainers=true else f=true end end elseif aN=='light'then if c then showRecipes=not showRecipes end elseif type=='option'then M:call('show '..ap)end end;function K.keyStop(M,aN)if aN=='lshift'then c=false elseif aN=='lalt'then d=false end end;function K.help(M)g(' ')g(' ')g(' ')g('----------------------------')g('- FR by Elias Villd / DE by Ikara')g('- twitch.tv/codeinfused')g('- tinyurl.com/indyhud')g('----------------------------')g('- INDY HUD BY CODEINFUSED v1.4')for O,aO in ipairs(M.helps)do if M.list[aO].desc~=nil then g(aO..M.list[aO].desc)end end;g('----------------------------')end;function K.call(M,aP,aQ)local aK={}for N in aP:gmatch(\"%S+\")do table.insert(aK,N)end;local y=string.lower(aK[1])if y=='help'then M:help()elseif M.list[y]then M.list[y].fn(M,aK,aQ)end end;return K end)()Industry:init()Commands:init()Commands:help()","filter":{"args":[],"signature":"onStart()","slotKey":"-1"},"key":"0"},{"code":"fpsTimer = fpsTimer + 1\nlocal currEpoch = round(system.getArkTime())\nif currEpoch > fpsEpoch then\n    fpsEpoch = currEpoch\n    fps = fpsTimer\n    fpsRender = renderFrames\n    fpsTimer = 0\n    renderFrames = 0\nend\n\nIndustry:coInit()\nIndustry:coSchems()\nIndustry:coUpdate()\nIndustry:coOrganize()\nIndustry:coRender()\ncollectgarbage(\"collect\")","filter":{"args":[],"signature":"onUpdate()","slotKey":"-4"},"key":"1"},{"code":"Commands:call(text)","filter":{"args":[{"variable":"*"}],"signature":"onInputText(text)","slotKey":"-4"},"key":"2"},{"code":"--[[if action:sub(1,6)=='option' then\n  Commands:key(action)\nelseif action=='speedup' then\n  Commands:key('r')\nelseif action=='gear' then\nend\n]]\nCommands:key(action)","filter":{"args":[{"variable":"*"}],"signature":"onActionStart(action)","slotKey":"-4"},"key":"3"},{"code":"Commands:keyStop(action)","filter":{"args":[{"variable":"*"}],"signature":"onActionStop(action)","slotKey":"-4"},"key":"4"}],"methods":[],"events":[]}